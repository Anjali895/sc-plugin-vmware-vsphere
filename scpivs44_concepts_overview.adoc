---
sidebar: sidebar
permalink: scpivs44_concepts_overview.html
keywords:
summary:
---

= Overview
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

//
// This file was created with NDAC Version 2.0 (August 17, 2020)
//
// 2020-09-09 12:24:20.235275
//

=== Product overview

SnapCenter Plug-in for VMware vSphere is a standalone virtual appliance (Open Virtual Appliance format) that provides data protection services for VMs and datastores, and supports data protection services for SnapCenter application-based plug-ins. This document describes how to deploy and use SnapCenter Plug-in for VMware vSphere and includes quick start information.

SnapCenter Plug-in for VMware vSphere is deployed as a Linux-based virtual appliance.

The SnapCenter VMware plug-in adds the following functionality to your environment:

* Support for VM-consistent and crash-consistent data protection operations.
+
You can use the VMware vSphere web client GUI in vCenter for all backup and restore operations of VMware virtual machines (VMs), VMDKs, and datastores. You can also restore VMs and VMDKs and restore files and folders that reside on a guest OS.
+
When backing up VMs, VMDKs, and datastores, the plug-in does not support RDMs. Backup jobs for VMs ignore RDMs. If you need to back up RDMs, you must use a SnapCenter application-based plug-in.
+
The SnapCenter VMware plug-in includes a MySQL database that contains the SnapCenter VMware plug-in metadata. For VM-consistent and crash-consistent data protection, you do not need to install SnapCenter Server.

* Support for application-consistent (application over VMDK/RDM) data protection operations.
+
You can use the SnapCenter GUI and the appropriate SnapCenter application plug-ins for all backup and restore operations of databases and filesystems on primary and secondary storage on VMs.
+
SnapCenter natively leverages the SnapCenter VMware plug-in for all data protection operations on VMDKs, raw device mappings (RDMs), and NFS datastores. After the virtual appliance is deployed, the plug-in handles all interactions with vCenter. The SnapCenter VMware plug-in supports all SnapCenter application-based plug-ins.
+
SnapCenter does not support single Snapshot copies of databases and VMs together. Backups for VMs and databases must be scheduled and run independently, which creates separate Snapshot copies, even if the databases and VMs are hosted in the same volume. Database application backups must be scheduled by using the SnapCenter GUI; VM and datastore backups must be scheduled by using the VMware vSphere web client GUI.

* VMware Tools is required for VM consistent Snapshot copies
+
If VMware Tools is not installed and running, the file system is not quiesced and a crash-consistent Snapshot is created.

* VMware Storage vMotion is required for restore operations in SAN (VMFS)  environments
+
The restore workflow for VMware file system (VMFS) utilizes the VMware Storage vMotion feature. Storage vMotion is a part of the vSphere Standard License but is not available with the vSphere Essentials or Essentials Plus licenses.
+
Most restore operations in NFS environments use native ONTAP functionality (for example, Single File SnapRestore) and do not require VMware Storage vMotion.

* The SnapCenter VMware plug-in is deployed as a virtual appliance in a Linux VM
+
Although the virtual appliance must be installed as a Linux VM, the SnapCenter VMware plug-in supports both Windows-based and Linux-based vCenters. SnapCenter natively uses this plug-in without user intervention to communicate with your vCenter to support SnapCenter application-based plug-ins that perform data protection operations on Windows and Linux virtualized applications.

In addition to these major features, the SnapCenter Plug-in for VMware vSphere also provides support for iSCSI, Fibre Channel, FCoE, VMDK over NFS 3.0 and 4.1, and VMDK over VMFS 5.0 and 6.0.

For the latest information about supported versions, see the https://mysupport.netapp.com/matrix/imt.jsp?components=91324;&solution=1517&isHWU&src=IMT[NetApp Interoperability Matrix Tool^] (IMT).

For information about NFS protocols and ESXi, see the VMware vSphere Storage documentation.

For information about SnapCenter data protection, see the Data Protection Guide for your SnapCenter plug-in in the http://docs.netapp.com/ocsc-43/index.jsp[SnapCenter Documentation Center^]. .

For information about supported upgrade and migration paths, see the https://library.netapp.com/ecm/ecm_download_file/ECMLP2863453[SnapCenter Plug-in for VMware vSphere Release Notes^].

=== Overview of the different SnapCenter GUIs

In your SnapCenter environment, you must use the appropriate GUI to perform data protection and management operations, as shown in the following table.

The SnapCenter Plug-in for VMware vSphere is a standalone plug-in that is different from other SnapCenter plug-ins. You must use the VMware vSphere web client GUI in vCenter for all backup and restore operations for VMs, VMDKs, and datastores. You also use the web client GUI Dashboard to monitor the list of protected and unprotected VMs. For all other SnapCenter plug-ins (application-based plug-ins), you use the SnapCenter GUI for backup and restore operations and job monitoring.

The SnapCenter VMware plug-in supports HTML5 vSphere web clients. It does not support vCenter Flex or thick clients.

To protect VMs and datastores, you use the VMware vSphere web client interface. The web client GUI integrates with NetApp Snapshot copy technology on the storage system. This enables you to back up VMs and datastores in seconds and restore VMs without taking an ESXi host offline.

There is also a management GUI to perform administrative operations on the SnapCenter VMware plug- in.

The following table shows the operations performed by each SnapCenter GUI.

|===
|Use This GUIâ€¦ |To Perform These Operations... |And to Access These Backups...

|SnapCenter vSphere web client GUI
|VM and datastore backup
VMDK attach and detach
Datastore mount and unmount
VM and VMDK restore
Guest file and folder restore
|Backups of VMs and datastores that were performed by using the VMware vSphere web client GUI.
|SnapCenter GUI
|Backup and restore of databases and applications on VMs, including protecting databases for Microsoft SQL Server, Microsoft Exchange, SAP HANA, and Oracle.
Database clone
|Backups performed by using the SnapCenter GUI.
|SnapCenter Plug-in for VMware vSphere management GUI
|Modify the network configuration
Generate a support bundle
Modify NTP server settings
Disable/enable the plug-in
|N.A.
|vCenter GUI
|Add SCV roles to vCenter Active Directory users
Add resource access to users or groups
|N.A.
|===

For VM-consistent backup and restore operations, you must use the VMware vSphere web client GUI. Although it is possible to perform some operations using VMware tools, for example, mounting or renaming a datastore, those operations will not be registered in the SnapCenter repository and are not recognized.

SnapCenter does not support single Snapshot copies of databases and VMs together. Backups for VMs and databases must be scheduled and run independently, which creates separate Snapshot copies even if the databases and VMs are hosted in the same volume. Application-based backups must be scheduled by using the SnapCenter GUI; VM-consistent backups must be scheduled by using the VMware vSphere web client GUI.

=== Licensing

SnapCenter Plug-in for VMware vSphere is a free product if you are using the following storage systems:

* FAS
* AFF
* Cloud Volumes ONTAP
* ONTAP Select

It is recommended, but not required, that you add SnapCenter Standard licenses to secondary destinations. If SnapCenter Standard licenses are not enabled on secondary systems, you cannot use SnapCenter after performing a failover operation. However, a FlexClone license on secondary storage is required to perform mount and attach operations. A SnapRestore license is required to perform restore operations.

=== Role-Based Access Control (RBAC)

SnapCenter Plug-in for VMware  vSphere provides an additional level of RBAC for managing virtualized resources. The plug-in supports both vCenter Server RBAC and Data ONTAP RBAC.

SnapCenter and ONTAP RBAC applies only to SnapCenter Server application-consistent (application over VMDK) jobs. If you use the SnapCenter VMware plug-in to support SnapCenter application-consistent jobs, you must assign the SnapCenterAdmin role; you cannot change the permissions of the SnapCenterAdmin role.

The SnapCenter VMware plug-in ships with predefined vCenter roles. You must use the vCenter GUI to add these roles to vCenter Active Directory users to perform SnapCenter operations.

You can create and modify roles and add resource access to users at any time. However, when you are setting up the SnapCenter VMware plug-in for the first time, you should at least add Active Directory users or groups to roles, and then add resource access to those users or groups.

=== Types of RBAC for SnapCenter Plug-in for VMware vSphere users

If you are using the SnapCenter Plug-in for VMware vSphere, the vCenter Server provides an additional level of RBAC. The plug-in supports both vCenter Server RBAC and ONTAP RBAC.

* *vCenter Server RBAC*
+
This security mechanism applies to all jobs performed by the SnapCenter VMware plug-in, which includes VM-consistent, VM crash-consistent, and SnapCenter Server application-consistent (application over VMDK) jobs. This level of RBAC restricts the ability of vSphere users to perform SnapCenter VMware plug-in tasks on vSphere objects, such as virtual machines (VMs) and datastores.
+
The SnapCenter VMware plug-in deployment creates the following roles for SnapCenter operations on vCenter:
+
`SCV Administrator`
`SCV Backup`
`SCV Guest File Restore`
`SCV Restore`
`SCV View`
+
The vSphere administrator sets up vCenter Server RBAC by doing the following:

** Setting the vCenter Server permissions on the root object (also known as the root folder). You can then refine the security by restricting child entities that do not need those permissions.
** Assigning the SCV roles to Active Directory users.
+
At a minimum, all users must be able to view vCenter objects. Without this privilege, users cannot access the VMware vSphere web client GUI.

* *ONTAP RBAC*
+
This security mechanism applies only to SnapCenter Server application-consistent (application over VMDK) jobs. This level restricts the ability of SnapCenter to perform specific storage operations, such as backing up storage for datastores, on a specific storage system.
+
Use the following workflow to set up ONTAP and SnapCenter RBAC:
+
. The storage administrator creates a role on the storage VM with the necessary privileges.
. Then the storage administrator assigns the role to a storage user.
. The SnapCenter administrator adds the storage VM to the SnapCenter Server, using that storage username.
. Then the SnapCenter administrator assigns roles to SnapCenter users.
+
The following figure provides an overview of the validation workflow for RBAC privileges (both vCenter and ONTAP):
+
image:scpivs44_image1.png[Error: Missing Graphic Image]

=== ONTAP RBAC features in SnapCenter Plug-in for VMware vSphere

[NOTE]
ONTAP RBAC applies only to SnapCenter Server application-consistent (application over VMDK) jobs.

ONTAP role-based access control (RBAC) enables you to control access to specific storage systems and the actions a user can perform on those storage systems. The SnapCenter VMware plug-in works with vCenter Server RBAC, SnapCenter RBAC (when needed to support application-based operations), and ONTAP RBAC to determine which SnapCenter tasks a specific user can perform on objects on a specific storage system.

SnapCenter uses the credentials that you set up (username and password) to authenticate each storage system and determine which operations can be performed on that storage system. The SnapCenter VMware plug-in uses one set of credentials for each storage system. These credentials determine all tasks that can be performed on that storage system; in other words, the credentials are for SnapCenter, not an individual SnapCenter user.

ONTAP RBAC applies only to accessing storage systems and performing SnapCenter tasks related to storage, such as backing up VMs. If you do not have the appropriate ONTAP RBAC privileges for a specific storage system, you cannot perform any tasks on a vSphere object hosted on that storage system.

Each storage system has one set of ONTAP privileges associated with it.

Using both ONTAP RBAC and vCenter Server RBAC provides the following benefits:

* Security
+
The administrator can control which users can perform which tasks on both a fine-grained vCenter Server object level and a storage system level.

* Audit information
+
In many cases, SnapCenter provides an audit trail on the storage system that lets you track events back to the vCenter user who performed the storage modifications.

* Usability
+
You can maintain controller credentials in one place.

=== Predefined roles packaged with SnapCenter Plug-in for VMware vSphere

To simplify working with vCenter Server RBAC, the SnapCenter VMware plug-in provides a set of predefined roles that enable users to perform SnapCenter tasks. There is also a read-only role that allows users to view SnapCenter information, but not perform any tasks.

The predefined roles have both the required SnapCenter-specific privileges and the native vCenter Server privileges to ensure that tasks complete correctly. In addition, the roles are set up to have the necessary privileges across all supported versions of vCenter Server.

As an administrator, you can assign these roles to the appropriate users.

The SnapCenter VMware plug-in returns these roles to their default values (initial set of privileges) each time you restart the vCenter web client service or modify your installation. If you upgrade the SnapCenter VMware plug-in, the predefined roles are automatically upgraded to work with that version of the plug-in.

You can see the predefined roles in the vCenter GUI by clicking *Menu > Administration > Roles* as shown in the following table.

|===
|Role |Description

|SCV Administrator
|Provides all native vCenter Server and SnapCenter-specific privileges necessary to perform all SnapCenter Plug-in for VMware vSphere tasks.
|SCV Backup
|Provides all native vCenter Server and SnapCenter-specific privileges necessary to back up vSphere objects (virtual machines and datastores).
The user also has access to the configure privilege.
The user cannot restore from backups.
|SCV Guest File Restore
|Provides all native vCenter Server and SnapCenter-specific privileges necessary to restore guest files and folders. The user cannot restore VMs or VMDKs.
|SCV Restore
|Provides all native vCenter Server and SnapCenter-specific privileges necessary to restore vSphere objects that have been backed up using the SnapCenter VMware plug-in and to restore guest files and folders.
The user also has access to the configure privilege.
The user cannot back up vSphere objects.
|SCV View
|Provides read-only access to all the SnapCenter VMware plug-in backups, resource groups, and policies.
|===
